!function(c){c(".composite_data").on("wc-composite-initializing",function(e,s){(new function(){function i(e){return new(Backbone.Model.extend({initialize:function(e){s.actions.add_action("active_scenarios_updated",this.component_selection_changed_handler,20,this);this.set({active_scenarios:[]})},component_selection_changed_handler:function(e){for(var i=s.scenarios.get_active_scenarios_by_type("overlay_image"),n=s.scenarios.get_scenario_shaping_components(),t=_.difference(_.pluck(s.get_components(),"component_id"),n),o=0,a=t.length;o<a;o++)i=_.difference(i,s.scenarios.get_unmasked_scenarios(i,t[o]));this.set({active_scenarios:i})}}))(e)}function n(e){return new(Backbone.View.extend({$main_image:!1,$gallery:!1,initialize:function(e){this.$main_image=this.$el.find(".woocommerce-product-gallery__image").first(),this.$gallery=this.$el.closest(".woocommerce-product-gallery"),this.listenTo(this.model,"change:active_scenarios",this.render)},render:function(){var e=this.model.get("active_scenarios"),i={width:this.$gallery.innerWidth(),position:"absolute"};this.$main_image.find(".wc-cp-overlay-image").remove();for(var n=e.length-1;0<=n;n--){var t=e[n],o=s.scenarios.get_scenario_data().scenario_settings.overlay_image[t],a=c(o).css(i);o&&this.$main_image.prepend(a)}}}))(e)}this.initialize=function(){var e=c(".woocommerce-product-gallery__wrapper").first();0<e.length&&(this.model=new i,this.view=new n({model:this.model,el:e}))}}).initialize()})}(jQuery,window,document);